<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:sec="http://www.springframework.org/security/tags"
      xmlns:f="http://java.sun.com/jsf/core"
>

<ui:composition template="/layout.xhtml">

    <ui:define name="title">
        Admin - Registry
    </ui:define>

    <ui:define name="content">
        <h:form prependId="false">
            <h3>Create trip</h3>
            <h3><h:outputLabel value="Fields can not be empty and must be unique."
                               rendered="${!empty param['error']}"/></h3>

            <h3><h:outputLabel value="Trip created."
                               rendered="${!empty param['success']}"/></h3>

            <table>
                <tr>
                    <td><h:outputText value="Title: "/></td>
                    <td><h:inputText id="addTitle" value="#{adminController.title}" class="createTripp"/></td>
                </tr>
                <tr>
                    <td><h:outputText value="Description: "/></td>
                    <td><h:inputText id="addDescription" value="#{adminController.description}" class="createTripp"/></td>
                </tr>
                <tr>
                    <td><h:outputText value="Location: "/></td>
                    <td><h:inputText id="addLocation" value="#{adminController.location}" class="createTripp"/></td>
                </tr>
                <tr>
                    <td><h:outputText value="Cost: "/></td>
                    <td><h:inputText id="addCost" value="#{adminController.cost}" class="createTripp"/></td>
                </tr>
                <tr>
                    <td><h:outputText value="Date: "/></td>
                    <td>
                        <h:inputText id="addDate" value="#{adminController.date}" class="createTripp">
                            <f:convertDateTime pattern="yyyy-MM-dd"/>
                        </h:inputText>
                    </td>
                </tr>
            </table>
            <h:commandButton
                    value="Create trip"
                    id="addBtn"
                    class="defaultBtn"
                    action="#{adminController.createTrip}">
            </h:commandButton>
        </h:form>

        <h:form prependId="false">
            <h3>Book Registry</h3>
            <h:dataTable value="#{tripsController.allTrips}" var="trip" border="1" id="tripsTable" class="tripRegistry tableTrip">
                <h:column>
                    <f:facet name="header">Title</f:facet>
                    <h:outputLabel value="#{trip.title}"
                                   class="tripTitle"
                                   id="title"/>
                </h:column>
                <h:column>
                    <f:facet name="header">Description</f:facet>
                    <h:outputLabel value="#{trip.description}"
                                   class="tripDescription"
                                   id="description"/>
                </h:column>
                <h:column>
                    <f:facet name="header">Location</f:facet>
                    <h:outputLabel value="#{trip.location}"
                                   class="tripLocation"
                                   id="location"/>
                </h:column>
                <h:column>
                    <f:facet name="header">Cost</f:facet>
                    <h:outputLabel value="#{trip.cost}"
                                   class="tripCost"
                                   id="cost"/>
                </h:column>
                <h:column>
                    <f:facet name="header">Date</f:facet>
                    <h:outputLabel value="#{trip.date}"
                                   class="tripDate"
                                   id="date"/>
                </h:column>


                <h:column>
                    <f:facet name="header">Delete</f:facet>
                    <!--Source for alert dialog: https://stackoverflow.com/questions/19362983/how-to-add-confirmation-dialog-->
                    <h:commandButton
                            onclick="return confirm('Do you want to delete #{trip.title}?')"
                            value="Delete"
                            class="defaultBtn"
                            action="#{adminController.deleteTrip(trip.id)}"
                            id="deleteBtn">
                    </h:commandButton>
                </h:column>
            </h:dataTable>
        </h:form>

    </ui:define>

</ui:composition>
</html>
